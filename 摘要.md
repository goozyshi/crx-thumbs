## 摘要

manifest

> " 扩展被安装后，Chrome就会读取扩展中的manifest.json文件。这个文件的文件名固定为manifest.json，内容是按照一定格式描述的扩展相关信息，如扩展名称、版本、更新地址、请求的权限、扩展的UI界面入口等等。这样Chrome就可以知道在浏览器中如何呈现这个扩展，以及这个扩展如何同用户进行交互 "

JS设置元素属性

> " JavaScript可以通过`getAttribute`方法读取元素的属性，通过`setAttribute`方法添加或更改元素的属性，通过`removeAttribute`方法删除元素的属性。 "

### 用户页面（content_scripts）

> " Manifest的`content_scripts`属性值为数组类型，数组的每个元素可以包含`matches`、`exclude_matches`、`css`、`js`、`run_at`、`all_frames`、`include_globs`和`exclude_globs`等属性。
>
> 其中`matches`属性定义了哪些页面会被注入脚本，`exclude_matches`则定义了哪些页面不会被注入脚本，`css`和`js`对应要注入的样式表和JavaScript，`run_at`定义了何时进行注入，`all_frames`定义脚本是否会注入到嵌入式框架中，`include_globs`和`exclude_globs`则是全局URL匹配，最终脚本是否会被注入由`matches`、`exclude_matches`、`include_globs`和`exclude_globs`的值共同决定。

###  权限 （permissions）

> " Manifest的`permissions`属性中声明需要跨域的权限。 比如，如果我们想设计一款获取维基百科数据并显示在其他网页中的扩展，就要在Manifest中进行如下声明： 
>
> ```
> {
>     ...
>     "permissions": [
>         "*://*.wikipedia.org/*"
>     ]
> }
> ```
>
>  这样Chrome就会允许你的扩展在任意页面请求维基百科上的内容了  "

### 后台 （background）

> " 在Manifest中指定`background`域可以使扩展常驻后台。`background`可以包含三种属性，分别是`scripts`、`page`和`persistent`。如果指定了`scripts`属性，则Chrome会在扩展启动时自动创建一个包含所有指定脚本的页面；如果指定了`page`属性，则Chrome会将指定的HTML文件作为后台页面运行。通常我们只需要使用`scripts`属性即可，除非在后台页面中需要构建特殊的HTML——但一般情况下后台页面的HTML我们是看不到的。`persistent`属性定义了常驻后台的方式——当其值为`true`时，表示扩展将一直在后台运行，无论其是否正在工作；当其值为`false`时，表示扩展在后台按需运行，这就是Chrome后来提出的Event Page。Event Page可以有效减小扩展对内存的消耗，如非必要，请将`persistent`设置为`false`。`persistent`的默认值为`true`。 "

Tips:  如果想在用户打开浏览器之前就让扩展运行，可以在Manifest的`permissions`属性中加入`"background"`，但除非必要，否则尽量不要这么做，因为大部分用户不喜欢这样。 

### 选项

> "	1.  *指定options_page属性后，扩展图标上的右键菜单会包含“选项”链接* 
>
> 2.  `localStorage`和Cookies类似，都有域的限制，运行在不同域的JavaScript无法调用其他域`localStorage`的数据；其次是单个域在`localStorage`中存储数据的大小通常有限制（虽然W3C没有给出限制），对于Chrome这个限制是5MB "
>
>  通过声明`unlimitedStorage`权限，Chrome扩展和应用可以突破这一限制。 

### 存储

> "使用Chrome存储API必须要在Manifest的`permissions`中声明`"storage"`，之后才有权限调用。Chrome存储API提供了2种储存区域，分别是`sync`和`local`。两种储存区域的区别在于，`sync`储存的区域会根据用户当前在Chrome上登陆的Google账户自动同步数据，当无可用网络连接可用时，`sync`区域对数据的读写和local区域对数据的读写行为一致。
>
> 对于每种储存区域，Chrome又提供了5个方法，分别是`get`、`getBytesInUse`、`set`、`remove`和`clear`。"